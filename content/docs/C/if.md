---
title: 6.控制流语句-if
type: docs
---
![bg](../../../cabin-3.png)
在我们写程序的时候肯定会遇见一些逻辑上的行为，这时候我们需要判断是否执行某段逻辑代码，或跳过某段代码    
这时候我们就需要控制流语句来帮我们确定某些程序走什么内容，跳过什么内容  

# if
在C语言中if是我们最简单的控制流，含义就是`如果 ... 就`，如果`1>2`就执行，当然我们都知道1小于2，所以这个并不执行
> if 是 C 语言中最基本的“选择结构”，也叫单分支控制流语句
```c
if (条件) {
    // 条件为真时执行
}
```
这个就是if的最基本代码形式，其中的条件是bool值，如果这个表达式或者函数调用的返回是1就是true，如果返回0就false，如果我们传递来一个数值并且这个值的内容不是0那么这个值就是true

> 在 C 中，条件表达式并不是严格的“true/false 类型”   
> 任何非 0 值都视为真，0 视为假  
> 如果使用 <stdbool.h>，bool 类型本质上仍然是 _Bool，只不过语言规定它会将非零自动转成 1   
> if (100)  // true，条件值其实是100，不是1

- 小括号里是判断条件
- 条件为“真”（结果非 0）时，执行花括号里的代码
- 条件为“假”（结果为 0）时，不执行

# if-else
这个语句的内容是在if不成立的时候走else，if-else 是一种“互斥分支结构”，只会进入其中一个分支，当 if 条件不成立时，程序顺序执行到 else，下面分支是没有条件判断的(我们当前来学的并没有，有条件的下一个小节来描述)  
```c
if (条件) {
    // 条件为真
} else {
    // 条件为假
}
```
条件满足的时候我们会走到if的代码块里面，不成立的时候会接着走到else里面执行，如果进入了这个 if-else 结构，那么 else 分支在 if 不成立的情况下一定会执行

# if ... else if ... else
这个就是我们上面说的带有带条件的分支判断了  
用于多条件判断(顺序从上往下，只会执行第一个满足的分支)  
```c
if (score >= 90) {
    printf("优秀\n");
} else if (score >= 60) {
    printf("及格\n");
} else {
    printf("不及格\n");
}
```
> [!WARNING]
> 条件从上到下判断  
> 只会执行其中一个分支  
> 最后的 else 可以省略  


# 条件表达式的返回值
- 在 C 中，条件其实就是一个表达式:
    - 零 → 假
    - 非零 → 真
```c
if (5)     // 真
if (0)     // 假
if (-3)    // 真
```

### 条件运算符(比较)

| 运算符  | 意义   |
| ---- | ---- |
| `==` | 等于   |
| `!=` | 不等于  |
| `>`  | 大于   |
| `<`  | 小于   |
| `>=` | 大于等于 |
| `<=` | 小于等于 |


> [!WARNING]
> 很多初学者把 = 当成比较，这是赋值

```c
if (x = 5)   // 这是赋值，不是判断
if (x == 5) // 正确写法
```

### 逻辑运算符
| 运算符 | 名称 | 示例 | 含义 |
|--------|------|------|------|
| `&&` | 逻辑与 | `a > 0 && a < 10` | 两个条件都为真 |
| `\|\|` | 逻辑或 | `a == 1 \|\| a == 2` | 至少一个为真 |
| `!` | 逻辑非 | `!flag` | 取反 |

```c
if (age >= 18 && age <= 60) {
    printf("工作年龄\n");
}
```

- 单行 if（无大括号）
```c
if (a > 0)
    printf("正数\n");
```
当if后面只需要跟一句代码的情况下可以不带大括号，不过这种操作是非常不推荐的，容易出现意外
> 在现代 C 开发中，始终加 {} 是几乎所有团队的编码规范（包括 Linux 内核、Google C++ style）
```c
if (a > 0)
    printf("正数\n");
    printf("这一行会无条件执行\n");   // 容易误解，这一行实际上是没有纳入if的条件的
```

- 条件判断嵌套
```c
if (a > 0) {
    if (a % 2 == 0) {
        printf("正偶数\n");
    } else {
        printf("正奇数\n");
    }
}
```
- 嵌套越深，可读性越差
- 可以通过组合条件或者 else if 来减少嵌套
> [!NOTE]
> 这里推荐各位使用大格缩进比如我现在代码都是用8格来看代码，之间空隙大并且也能提醒你代码写的太长了或者嵌套太深入

### 混淆点
```c
if (a > 0)
    ...
if (a > 10)
    ...
```
和
```c
if (a > 0)
    ...
else if (a > 10)
    ...
```

这两个是完全完全不同的，不在同一条语句里面
- 这里的两个 if 彼此完全独立
- 两个条件都满足时，会执行两次打印
- 也就是说程序会依次检查两个条件，不管第一个是否成立，第二个 if 都会继续判断

```c
if (a > 0) {
    printf("大于0\n");
} else if (a > 10) {
    printf("大于10\n");
}
```

- 先判断 a > 0
- 如果为真，执行该分支，然后整个结构结束
- 如果为假，才会继续判断 else if
> 只会执行第一个满足条件的分支，后面的分支不会再判断

> [!WARNING]
> 多个 if 是多个独立判断   
> if + else if 是互斥判断，只会执行一个分支


