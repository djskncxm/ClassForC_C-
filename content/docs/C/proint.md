---
title: 1.指针基础
type: docs
---
![bg](../../../blueberries.jpg)
1. 指针是什么
指针就是一个变量，只不过它存的不是普通数字，而是“内存地址”
内存地址也就是一堆计算机内部定义出来的大长十六进制数
> 0x7ffded050   

C语言给了我们去对内存地址操作的接口，我们可以访问或修改这个地址里面的内容   
指针就是让你能"指名道姓"地操作内存中特定位置的工具！

2. 指针的本质   
指针的本质：内存地址的直接操作
```c 
int a = 10;
int *p = &a;
```
我们被标记的变量是`a`，标记的变量是`p`，其中`&`符号叫做`取址符号`表示获取内存地址，`*`表示`取值符号`,表示我们想拿到值   
- 那么`int *p = &a`是什么意思呢？   
    - 我们先拿到了a的内存地址
    - 然后我们把他内存地址给到指针p
    - 那么指针p就是拿地址的a
    - p 本身存储的是内存地址，我们通过`*p`来获取内部的值
    - 先看p再看\*，\*是一个操作符号，刚刚学的时候可以这么理解
        > \*p和&a指向的地址是一样的，所以访问\*p自动就获取到a的值了

内存布局：   
  变量 a value:10 addr:0x100  
  指针 p address: 指向 0x100操作流程：

1. &a → 得到地址 0x100（问：a住在哪？）
2. p = &a → p 记录"a住在0x100"
3. *p → 到0x100地址取东西 → 得到10

##### 指针的类型
指针是有类型的，因为它里面存储的数据是有类型的，不同的类型的两种东西不能放在一起使用，会发生什么我也不知道
```c 
int *p;
char *cp;
float *fp;
...
```

---

### 指针和数组
核心关系：数组名就是指针常量
```c 
int arr[5] = {1, 2, 3, 4, 5};
```

- 数组名的本
    - arr 实际上是一个指向数组首元素的常量指针
    - arr 等价于 &arr[0]（指向第一个元素的地址）
    - arr 的类型是 int *const（指向int的常量指针）
```c 
arr[1]        // 传统的数组下标
*(arr + 1)    // 指针算术运算 IDA里常见
*(1 + arr)    // 交换顺序也成立 IDA里面也常见
1[arr]        // 这种语法也合法（但不推荐！） 我都没见过指针写法，看起来和ATT x86汇编有点像
```

指针运算与数组遍历
```c 
int arr[5] = {10, 20, 30, 40, 50};
int *p = arr;  // p指向数组开头

// 通过指针遍历数组
for(int i = 0; i < 5; i++) {
    printf("%d ", *(p + i));  // 输出: 10 20 30 40 50
}

// 或者直接用指针自增
p = arr;
for(int i = 0; i < 5; i++) {
    printf("%d ", *p);
    p++;  // 指针移动到下一个元素
}
```

多维数组的指针表示
```c 
int matrix[3][4] = {
    {1, 2, 3, 4},
    {5, 6, 7, 8},
    {9, 10, 11, 12}
};

// matrix[i][j] 等价于 *(*(matrix + i) + j)
printf("%d\n", *(*(matrix + 1) + 2));  // 输出: 7 (第2行第3列)
```
<div align="center">数组名就是指向数组首元素的常量指针</div>
